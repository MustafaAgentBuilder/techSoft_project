{% extends "base.html" %}

{% block title %}Photo Try-On - Virtual Specs 3D Try-On{% endblock %}

{% block content %}
<div class="tryon-section">
    <div class="container">
        <h1 class="page-title">ðŸ“· Photo Try-On</h1>
        <p class="page-subtitle">Upload your photo and try different eyewear frames virtually</p>

        <div class="tryon-container">
            <!-- Upload Section -->
            <div class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <div class="upload-icon">ðŸ“¤</div>
                        <h3>Upload Your Photo</h3>
                        <p>Click to browse or drag and drop your image</p>
                        <p class="upload-note">Supported formats: JPG, PNG (Max 16MB)</p>
                        <input type="file" id="photoInput" accept="image/jpeg,image/jpg,image/png" style="display: none;">
                        <button class="btn btn-primary" id="uploadBtn">Choose Photo</button>
                    </div>
                </div>
            </div>

            <!-- Canvas Section -->
            <div class="canvas-section" id="canvasSection" style="display: none;">
                <div class="canvas-container">
                    <canvas id="tryonCanvas" width="800" height="600"></canvas>
                </div>

                <!-- Controls Section -->
                <div class="controls-section">
                    <div class="frame-selector">
                        <h4>Select Frame</h4>

                        <!-- Category Filters -->
                        <div class="category-filters" id="categoryFilters">
                            <button class="category-filter active" data-category="all">
                                All Frames
                            </button>
                            <button class="category-filter" data-category="classic">
                                Classic
                            </button>
                            <button class="category-filter" data-category="vintage">
                                Vintage
                            </button>
                            <button class="category-filter" data-category="sport">
                                Sport
                            </button>
                            <button class="category-filter" data-category="fashion">
                                Fashion
                            </button>
                            <button class="category-filter" data-category="minimalist">
                                Minimalist
                            </button>
                        </div>

                        <!-- Frame Options Grid -->
                        <div class="frame-options" id="frameOptions">
                            <!-- Frames will be loaded dynamically -->
                        </div>

                        <!-- Filter Results Info -->
                        <div class="filter-info" id="filterInfo" style="display: none;">
                            <span id="filterCount"></span>
                        </div>
                    </div>

                    <div class="position-controls">
                        <h4>Adjust Position</h4>
                        <div class="control-group">
                            <label>X Position: <span id="xValue">400</span></label>
                            <input type="range" id="xSlider" min="0" max="800" value="400"
                                   aria-label="Frame horizontal position" aria-valuemin="0" aria-valuemax="800" aria-valuenow="400" aria-valuetext="400 pixels from left">
                        </div>
                        <div class="control-group">
                            <label>Y Position: <span id="yValue">200</span></label>
                            <input type="range" id="ySlider" min="0" max="600" value="200"
                                   aria-label="Frame vertical position" aria-valuemin="0" aria-valuemax="600" aria-valuenow="200" aria-valuetext="200 pixels from top">
                        </div>
                        <div class="control-group">
                            <label>Size: <span id="zoomValue">100</span>%</label>
                            <input type="range" id="zoomSlider" min="50" max="200" value="100"
                                   aria-label="Frame size zoom" aria-valuemin="50" aria-valuemax="200" aria-valuenow="100" aria-valuetext="100% zoom">
                        </div>
                        <button class="btn btn-secondary" id="resetBtn">Reset Position</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/photo-upload-simple.js') }}"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('Photo Try-On page loaded - using simple version');
});
</script>
{% endblock %}
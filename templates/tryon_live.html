{% extends "base.html" %}

{% block title %}Live Try-On - Virtual Specs 3D Try-On{% endblock %}

{% block content %}
<div class="tryon-section">
    <div class="container">
        <h1 class="page-title">ðŸ“¹ Live Webcam Try-On</h1>
        <p class="page-subtitle">Use your webcam for real-time virtual try-on experience</p>

        <div class="tryon-container">
            <!-- Video Section -->
            <div class="video-section">
                <div class="video-container">
                    <video id="webcamVideo" width="800" height="600" autoplay playsinline style="position: absolute; top: 0; left: 0; z-index: 1;"></video>
                    <canvas id="liveCanvas" width="800" height="600" style="position: relative; z-index: 2;"></canvas>
                </div>

                <!-- Controls Section -->
                <div class="controls-section" id="liveControls" style="display: none;">
                    <div class="frame-selector">
                        <h4>Select Frame</h4>

                        <!-- Category Filters -->
                        <div class="category-filters" id="liveCategoryFilters">
                            <button class="category-filter active" data-category="all">
                                All Frames
                            </button>
                            <button class="category-filter" data-category="classic">
                                Classic
                            </button>
                            <button class="category-filter" data-category="vintage">
                                Vintage
                            </button>
                            <button class="category-filter" data-category="sport">
                                Sport
                            </button>
                            <button class="category-filter" data-category="fashion">
                                Fashion
                            </button>
                            <button class="category-filter" data-category="minimalist">
                                Minimalist
                            </button>
                        </div>

                        <!-- Frame Options Grid -->
                        <div class="frame-options" id="liveFrameOptions">
                            <!-- Frames will be loaded dynamically -->
                        </div>

                        <!-- Filter Results Info -->
                        <div class="filter-info" id="liveFilterInfo" style="display: none;">
                            <span id="liveFilterCount"></span>
                        </div>
                    </div>

                    <div class="position-controls">
                        <h4>Adjust Position</h4>
                        <div class="control-group">
                            <label>X Position: <span id="liveXValue">400</span></label>
                            <input type="range" id="liveXSlider" min="0" max="800" value="400">
                        </div>
                        <div class="control-group">
                            <label>Y Position: <span id="liveYValue">200</span></label>
                            <input type="range" id="liveYSlider" min="0" max="600" value="200">
                        </div>
                        <div class="control-group">
                            <label>Size: <span id="liveZoomValue">100</span>%</label>
                            <input type="range" id="liveZoomSlider" min="50" max="200" value="100">
                        </div>
                        <div class="control-group">
                            <label>
                                <input type="checkbox" id="mirrorVideo" checked>
                                Mirror Display
                            </label>
                        </div>
                        <button class="btn btn-secondary" id="liveResetBtn">Reset Position</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/live-tryon-simple.js') }}"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('Live Try-On page loaded - using simple version');
});
</script>
{% endblock %}